<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.nextdoor.file.dao.FileDAO">
	
	<!-- 파일업로드 -->
	<insert id="uploadFile">
		insert into file(specifictask_no, original_name, file_name, file_date, file_size, member_id)
		values(#{specifictask_no},#{original_name},#{file_name},now(),#{file_size}, #{member_id})
	</insert>
	
	<!-- 파일목록보기 -->
	<select id="listFile" resultType="kr.co.nextdoor.file.dto.FileDTO">
		select f.file_no, st.specifictask_no, f.original_name, f.file_name, f.file_date, f.file_size, f.member_id
		from workspace w join project p join task t join specifictask st join file f
		on w.workspace_no = p.workspace_no and p.project_no = t.project_no and
		   t.task_no = st.task_no and st.specifictask_no = f.specifictask_no
		where p.project_no = ${project_no}
	</select>
	
</mapper>